<body>
    <header>
        <h1>{{subject}} Forum</h1>
    </header>
    <main>
        <section id="new-post">
            <h2>Create a New Post</h2>
            <form action="/forum/{{subject_id}}" method="POST">
                <label for="authorName">Author Name</label>
                <input type="text" id="authorName" name="authorName" placeholder="Enter your name" required>

                <label for="title">Post Title</label>
                <input type="text" id="title" name="title" placeholder="Enter Post Title">

                <label for="content">Content:</label>
                <textarea id="content" name="content" placeholder="Enter your Post Body" rows="5" required></textarea>

                <button type="submit">Post</button>
            </form>
        </section>

        <section id="posts">
            <h2>Posts</h2>

            {{#if posts}}
            {{#each posts}}
            <article class="post">
                <h3>{{title}}</h3>
                <p><strong>Author:</strong> {{authorName}}</p>
                <p><strong>Content:</strong>{{content}}</p>
                <p><strong>Posted At:</strong> {{created_at}}</p>

                <a href="/forum/{{../subject_id}}/{{_id}}">
                    <button type="button">Edit</button>
                </a>

                <form action="/forum/{{../subject_id}}/{{_id}}" method="POST" class="delete-post">
                    <input type="hidden" name="_method" value="DELETE">
                    <input type="hidden" name="authorName" value="{{authorName}}">
                    <button type="submit">Delete Post</button>
                </form>

                {{#if replies}}
                <section class="replies">
                    <h4>Replies:</h4>
                    <ul>
                        {{#each replies}}
                        <li>
                            <p><strong>Author:</strong> {{authorName}}</p>
                            <p>{{content}}</p>
                            <p><strong>Replied At:</strong> {{created_at}}</p>

                            <a href="/forum/{{../subject_id}}/{{../_id}}/{{_id}}/edit">
                                <button type="button">Edit</button>
                            </a>

                            <form action="/forum/{{../../subject_id}}/{{../_id}}/{{_id}}" method="POST"
                                class="delete-reply">
                                <input type="hidden" name="_method" value="DELETE">
                                <button type="submit">Delete Reply</button>
                            </form>

                        </li>
                        {{/each}}
                    </ul>
                </section>
                {{/if}}

                <a href="/forum/{{../subject_id}}/{{_id}}/reply">
                    <button type="button">Add Reply</button>
                </a>
            </article>
            {{/each}}
            {{else}}
            <p>No posts found in this forum. Start us off!</p>
            {{/if}}
        </section>
    </main>
    <footer>
        <p>&copy; {{currentYear}} Forum Application</p>
    </footer>
</body>